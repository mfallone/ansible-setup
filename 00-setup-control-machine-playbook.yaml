---
# file: 00-setup-control-machine-playbook.yaml
- hosts: localhost
  pre_tasks:
    - name: Check prerequisites
      stat:
        path: ./roles/ansible-role-common
      register: file_details
    
    - name: Git Clone ansible-role-common repository
      git:
        repo: "git@github.com:Psiphon-Infrastructure/ansible-role-common.git"
        dest: ./roles/ansible-role-common
      ignore_errors: true
      when: file_details.stat.exists == False
  roles:
    - ansible-role-control-machine

